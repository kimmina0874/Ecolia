<!DOCTYPE html>
<html>
<head>
	<title>Ecolia World Logs</title>
	<style>
		body { background: #111; color: #eee; font-family: monospace; padding: 20px; }
		#log, #dialog { white-space: pre-line; border: 1px solid #444; padding: 10px; height: 200px; overflow-y: scroll; margin-bottom: 20px; }
		select { margin-bottom: 10px; }
	</style>
</head>
<body>
	<h2>ğŸŒ Ecolia ì‹œë®¬ë ˆì´ì…˜ ë¡œê·¸</h2>
	<div id="log">[Logs loading...]</div>

	<h3>ğŸ’¬ ëŒ€í™” ë³´ê¸°</h3>
	<select id="level">
		<option value="all">ì „ì²´</option>
		<option value="international">êµ­ì œ</option>
		<option value="national">êµ­ê°€</option>
		<option value="city">ë„ì‹œ</option>
		<option value="village">ë§ˆì„</option>
		<option value="personal">ê°œì¸</option>
	</select>
	<div id="dialog">[Dialogs loading...]</div>

	<script>
		const logBox = document.getElementById("log");
		const dialogBox = document.getElementById("dialog");
		const level = document.getElementById("level");

		async function fetchLogs() {
			const res = await fetch("/api/logs");
			const data = await res.json();
			logBox.innerText = data.logs.join("\n");
		}
		async function fetchDialogs() {
			const res = await fetch(`/api/dialogs?level=${level.value}`);
			const data = await res.json();
			dialogBox.innerText = data.dialogs.join("\n");
		}
		setInterval(fetchLogs, 1000);
		setInterval(fetchDialogs, 1500);
		level.addEventListener("change", fetchDialogs);
	</script>
</body>
</html>
